#Define a página inicial
DirectoryIndex index.php index.html
ErrorDocument 404 /404.php

Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^(.*)/$ /$1 [L,R]

#Permite o uso das páginas sem a extensão
RewriteRule ^([^\.]+)$ $1.php [NC,L]

#Substituições comuns
RewriteRule ^home index.php [NC,L]
RewriteRule ^inicio index.php [NC,L]

#Redireciona para a linguagem desejada
RewriteRule ^pt/(.+)$ ./$1?lang=pt_BR [NE,QSA,L]
RewriteRule ^pt ./index?lang=pt_BR [NE,QSA,L]

RewriteRule ^en/(.+)$ ./$1?lang=en_US [NE,QSA,L]
RewriteRule ^en ./index?lang=en_US [NE,QSA,L]

RewriteRule ^es/(.+)$ ./$1?lang=es_ES [NE,QSA,L]
RewriteRule ^es ./index?lang=es_ES [NE,QSA,L]

#Redireciona para a máquina
RewriteRule ^m/(.+)$ ./machines.php?pagename=$1 [NE,QSA,L]
RewriteRule ^pt/m/(.+)$ ./machines.php?lang=pt_BR&pagename=$1 [NE,QSA,L]
RewriteRule ^en/m/(.+)$ ./machines.php?lang=en_US&pagename=$1 [NE,QSA,L]
RewriteRule ^es/m/(.+)$ ./machines.php?lang=es_ES&pagename=$1 [NE,QSA,L]

RewriteRule ^pt/maquinas/(.+)$ ./machines.php?lang=pt_BR&pagename=$1 [NE,QSA,L]
RewriteRule ^en/maquinas/(.+)$ ./machines.php?lang=en_US&pagename=$1 [NE,QSA,L]
RewriteRule ^es/maquinas/(.+)$ ./machines.php?lang=es_ES&pagename=$1 [NE,QSA,L]

RewriteRule ^pt/maquina/(.+)$ ./machines.php?lang=pt_BR&pagename=$1 [NE,QSA,L]
RewriteRule ^en/maquina/(.+)$ ./machines.php?lang=en_US&pagename=$1 [NE,QSA,L]
RewriteRule ^es/maquina/(.+)$ ./machines.php?lang=es_ES&pagename=$1 [NE,QSA,L]

RewriteRule ^maquinas/bobinas ./machines.php?type=bobinas [NE,QSA,L]
RewriteRule ^maquina/bobinas ./machines.php?type=bobinas [NE,QSA,L]

RewriteRule ^maquinas/chapas ./machines.php?type=chapas [NE,QSA,L]
RewriteRule ^maquina/chapas ./machines.php?type=chapas [NE,QSA,L]

RewriteRule ^maquinas ./machines.php [NE,QSA,L]
RewriteRule ^maquina ./machines.php [NE,QSA,L]